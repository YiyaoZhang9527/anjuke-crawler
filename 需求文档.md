# 安居客爬虫项目需求文档

## 📋 项目概述

### 项目背景

- **项目名称**：安居客租房信息爬虫系统
- **项目目标**：爬取安居客网站租房信息，提取房源详细信息并保存为CSV格式
- **项目类型**：Web爬虫项目，面向房产数据采集

## 🎯 核心需求

### 1. 功能需求

#### 1.1 基础爬取功能

- ✅ **网站爬取**：能够访问并抓取安居客租房页面
- ✅ **页面导航**：支持批量URL列表爬取
- ✅ **数据采集**：提取房源基础信息
- ✅ **数据存储**：保存为CSV格式，支持增量写入

#### 1.2 反爬虫应对

- ✅ **自动验证**：支持点击式验证码的自动处理
- ✅ **智能延时**：防止被反爬虫系统检测
- ✅ **浏览器伪装**：User-Agent轮换和反检测
- ✅ **模拟人类滑动页面**：防止被反爬虫系统检测

#### 2. 技术栈

- ✅ **Python 3**：主要开发语言
- ✅ **Playwright**：浏览器自动化框架
- ✅ **lxml**：HTML解析和XPath提取
- ✅ **asyncio**：异步编程支持
- ✅ **csv**：数据存储格式

## 📊 输出数据格式⭐ 核心重点

**CSV文件字段**：

```csv
"房源编号","标题","租赁方式","是否官方核验","是否安选","价格","押金","房屋面积","户型","小区","详情链接","楼层","朝向","装修","联系方式","个人姓名","公司名称","经纪人信息","房源概况","房屋设施","卧室设施","公共设施","更新时间","爬取时间"
```

**字段说明**：

- **房源编号**：二级页面里提取，字段“房源编码”后面的数字
- **标题**：一级页面提取
- **租赁方式**：整租/合租（二级页面提取，关键字”整租“，"合租"）
- **是否官方核验**：是/否（房源列表页面提取 查看关键字"官方核验"）
- **是否安选**：是否（二级页面 提取查看关键字"安选"）
- **价格**：二级页面房屋信息里的红色大字"xxx元/月"
- **押金**：二级页面房屋信息里的灰色小字"付x押x"
- **房屋面积**：二级页面房屋信息里的"面积"字段内容
- **户型**：二级页面房屋信息里的"户型"字段内容
- **小区**：二级页面房屋信息里的"小区"字段内容
- **详情链接**：二级页面url
- **楼层**：二级页面房屋信息里的"楼层"字段内容
- **朝向**：二级页面房屋信息里的"朝向"字段内容
- **装修**：二级页面房屋信息里的"装修"字段内容
- **联系方式**：
- **个人姓名**：二级页面里租房人的姓名，可能是经济人也可能是个人
- **公司名称**：如果是经济人，有公司，就抓取，没有就留空
- **经纪人信息**：
- **房源概况**：二级页面里“房源概况"下面的所有内容
- **房屋设施**：二级页面里提取，整租才有”房屋设施"，灰色线条不是该房源拥有的，应该是黑色线条的才算拥有，标签里有“has"字段
- **卧室设施**：二级页面里提取，合租才有”卧室设施“，灰色线条不是该房源拥有的，应该是黑色线条的才算拥有，标签里有“has"字段
- **公共设施**：二级页面里提取，合租才有”公共设施“，灰色线条不是该房源拥有的，应该是黑色线条的才算拥有，标签里有“has"字段
- **更新时间**：二级页面里提取，“更新时间"后面的日期
- **爬取时间**：存储该房源数据的时间
